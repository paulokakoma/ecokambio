<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Site Verification -->
    <meta name="google-site-verification" content="mKkaUaIb7qgtdmOu_NnH2BqK6sUMVnhk6JPAcmNfEpA" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />

    <!-- Google AdSense -->
    <meta name="google-adsense-account" content="ca-pub-7407113762962919">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7407113762962919"
        crossorigin="anonymous"></script>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-N88ZM46F');</script>
    <!-- End Google Tag Manager -->


    <title>Adquira o seu Cart√£o Visa Virtual - EcoKambio</title>
    <meta name="description"
        content="Cart√£o Visa Virtual Angola: compras online, Netflix, Spotify, Amazon. Carregamento a partir 5 USD/EUR. Ativa√ß√£o r√°pida via WhatsApp. Pague em kwanzas (AOA).">
    <meta name="keywords"
        content="cartao visa virtual angola, visa angola online, comprar visa angola, netflix angola pagamento, spotify angola, amazon angola, visa prepago angola, cartao internacional angola, compras online angola, google play angola, facebook ads angola, cartao digital angola">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ecokambio.com/visa">
    <meta property="og:title" content="Adquira o seu Cart√£o Visa Virtual - EcoKambio">
    <meta property="og:description"
        content="Adquira j√° o seu cart√£o Visa virtual para compras online e pagamentos de servi√ßos internacionais.">
    <meta property="og:image" content="https://ecokambio.com/assets/social-share-banner.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ecokambio.com/visa">
    <meta property="twitter:title" content="Adquira o seu Cart√£o Visa Virtual - EcoKambio">
    <meta property="twitter:description"
        content="Adquira j√° o seu cart√£o Visa virtual para compras online e pagamentos de servi√ßos internacionais.">
    <meta property="twitter:image" content="https://ecokambio.com/assets/social-share-banner.png">

    <!-- Favicons e Manifest -->
    <link rel="canonical" href="https://ecokambio.com/visa" />
    <link rel="icon" href="/assets/favicon.ico" sizes="any">
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Cart√£o Visa Virtual",
  "description": "Cart√£o Visa virtual pr√©-pago para compras online e pagamentos de servi√ßos internacionais. Ativa√ß√£o r√°pida, 100% digital.",
  "brand": {
    "@type": "Brand",
    "name": "EcoKambio"
  },
  "image": "https://ecokambio.com/assets/visa.png",
  "offers": {
    "@type": "Offer",
    "priceCurrency": "USD",
    "price": "5.00",
    "availability": "https://schema.org/InStock",
    "url": "https://ecokambio.com/visa",
    "seller": {
      "@type": "Organization",
      "name": "Moko Tech, Sociedade por Quotas",
      "url": "https://ecokambio.com"
    },
    "hasMerchantReturnPolicy": {
      "@type": "MerchantReturnPolicy",
      "applicableCountry": "AO",
      "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
      "merchantReturnDays": 7,
      "returnMethod": "https://schema.org/ReturnByMail",
      "returnFees": "https://schema.org/FreeReturn"
    },
    "shippingDetails": {
      "@type": "OfferShippingDetails",
      "shippingDestination": {
        "@type": "DefinedRegion",
        "addressCountry": "AO"
      },
      "deliveryTime": {
        "@type": "ShippingDeliveryTime",
        "handlingTime": {
          "@type": "QuantitativeValue",
          "minValue": 0,
          "maxValue": 1,
          "unitCode": "DAY"
        },
        "transitTime": {
          "@type": "QuantitativeValue",
          "minValue": 0,
          "maxValue": 0,
          "unitCode": "DAY"
        }
      },
      "shippingRate": {
        "@type": "MonetaryAmount",
        "value": "0",
        "currency": "USD"
      }
    }
  }
}
</script>

    <!-- Tailwind CSS (Build) -->
    <link href="/css/output.css" rel="stylesheet">

    <!-- Preconnect to critical third-party origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://drkjkkpzujwnkghtdokz.supabase.co">

    <!-- Load fonts with display=swap to prevent layout shift -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f0fdfa 100%);
            min-height: 100vh;
        }

        /* Anima√ß√µes */
        @keyframes heartbeat {

            0%,
            100% {
                transform: scale(1);
            }

            14% {
                transform: scale(1.1);
            }

            28% {
                transform: scale(1);
            }

            42% {
                transform: scale(1.1);
            }

            70% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }

            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .visa-heartbeat img {
            animation: heartbeat 2.5s infinite;
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        /* Gradiente animado */
        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, #10b981, #14b8a6, #06b6d4);
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
        }

        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Button shine effect */
        .btn-shine {
            position: relative;
            overflow: hidden;
        }

        .btn-shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn-shine:hover::before {
            left: 100%;
        }

        /* Custom Select */
        .custom-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }

        /* Card hover effect */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Pulse animation for CTA */
        @keyframes pulse-ring {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }

        .pulse-cta {
            animation: pulse-ring 2s infinite;
        }

        /* Reordenar colunas em telas menores: Simulador antes do Cart√£o */
        @media (max-width: 768px) {
            .hero-grid {
                display: flex;
                flex-direction: column-reverse;
            }
        }

        /* Remove arrow from select */
        .no-arrow {
            background-image: none !important;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col antialiased">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N88ZM46F" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->



    <header data-include="/components/header.html" class="bg-white shadow-sm"></header>


    <main class="flex-grow w-full">

        <!-- Sec√ß√£o 1: Hero -->
        <section class="relative py-8 md:py-24 overflow-hidden">
            <!-- Elementos decorativos de fundo -->
            <div class="absolute top-0 right-0 w-96 h-96 bg-emerald-200 rounded-full filter blur-3xl opacity-20 -z-10">
            </div>
            <div class="absolute bottom-0 left-0 w-96 h-96 bg-teal-200 rounded-full filter blur-3xl opacity-20 -z-10">
            </div>
            <div
                class="hero-grid max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-16 items-start">

                <!-- Coluna da Imagem + CTA -->
                <div class="space-y-6 fade-in-up" style="animation-delay: 0.2s">
                    <!-- Imagem do Cart√£o -->
                    <div class="flex justify-center items-center px-2 sm:px-0">
                        <picture>
                            <source srcset="/assets/visa.webp" type="image/webp">
                            <img id="visa-image" src="/assets/visa.png" alt="Cart√£o Visa Virtual" width="480"
                                height="300"
                                class="max-w-xs sm:max-w-md w-full rounded-xl sm:rounded-2xl shadow-xl sm:shadow-2xl float-animation">
                        </picture>
                    </div>

                    <!-- CTA Section: Info box + Button + Terms -->
                    <div class="space-y-3 sm:space-y-4">
                        <!-- Info Box -->
                        <div
                            class="bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 rounded-xl p-4 shadow-md">
                            <p class="text-sm text-emerald-900 font-medium flex items-center gap-2">
                                <span class="text-xl">‚úÖ</span>
                                <span>Gostou? Clique no bot√£o abaixo para solicitar seu cart√£o via WhatsApp!</span>
                            </p>
                        </div>

                        <!-- WhatsApp Button -->
                        <a id="whatsapp-cta-btn-hero" href="#" target="_blank" rel="noopener"
                            class="btn-shine pulse-cta inline-flex items-center justify-center gap-3 w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-bold py-4 sm:py-5 px-6 sm:px-8 rounded-xl text-base sm:text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                            <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z">
                                </path>
                            </svg>
                            <span>Pedir Meu Cart√£o Agora</span>
                        </a>

                        <!-- Terms -->
                        <p class="text-xs text-slate-500 text-center">
                            üîí R√°pido e seguro ‚Ä¢ Ao clicar, concorda com os <a href="/termos" target="_blank"
                                class="underline hover:text-emerald-600">Termos e Condi√ß√µes</a>.
                        </p>
                    </div>
                </div>

                <!-- Coluna de Texto + Conversor -->
                <div class="fade-in-up space-y-5 sm:space-y-6" style="animation-delay: 0.1s">
                    <!-- Header Section: Title -->
                    <div class="space-y-3 sm:space-y-4">
                        <h1 id="visa-title"
                            class="text-2xl sm:text-3xl md:text-5xl font-extrabold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                            Cart√£o Visa</h1>
                    </div>

                    <!-- Simulador de Carregamento -->
                    <div id="quick-converter-container"
                        class="glass p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-xl sm:shadow-2xl backdrop-blur-lg border-2 border-white/30">
                        <!-- Header do Simulador -->
                        <div class="mb-4 sm:mb-6">
                            <h4
                                class="text-xl font-bold bg-gradient-to-r from-emerald-700 to-teal-700 bg-clip-text text-transparent flex items-center gap-2">
                                <span class="text-2xl">üí≥</span>
                                Simule quanto vai pagar
                            </h4>
                        </div>

                        <!-- Input Group: Valor + Moeda -->
                        <div class="mb-4 sm:mb-6">
                            <label class="text-sm font-semibold text-gray-800 flex items-center gap-1 mb-2">
                                üíµ Quanto quer carregar?
                            </label>
                            <div
                                class="flex gap-0 border-2 border-emerald-300 rounded-lg sm:rounded-xl shadow-sm focus-within:ring-4 focus-within:ring-emerald-400/50 focus-within:border-emerald-500 transition-all duration-300">
                                <input type="text" id="quick-converter-amount" inputmode="decimal"
                                    class="flex-1 p-3 sm:p-4 border-0 rounded-l-lg sm:rounded-l-xl text-lg sm:text-xl font-mono focus:ring-0 focus:outline-none"
                                    placeholder="Ex: 10,00">
                                <select id="quick-converter-from"
                                    class="no-arrow custom-select p-3 sm:p-4 bg-white border-0 border-l-2 border-emerald-300 rounded-r-lg sm:rounded-r-xl font-semibold text-base sm:text-lg focus:ring-0 focus:outline-none">
                                    <option value="USD">üá∫üá∏ USD</option>
                                    <option value="EUR">üá™üá∫ EUR</option>
                                </select>
                            </div>
                            <p class="text-xs text-gray-600 font-medium mt-2">‚úì M√≠nimo: 5,00 ‚Ä¢ M√°ximo: 5.000.000</p>
                        </div>

                        <!-- Resultado -->
                        <div class="gradient-border rounded-lg sm:rounded-xl p-[2px]">
                            <div class="bg-white rounded-lg sm:rounded-xl p-3 sm:p-4">
                                <div class="flex items-center justify-center gap-2 mb-2">
                                    <span class="text-lg">üí∞</span>
                                    <p class="font-bold text-emerald-800">Voc√™ vai pagar</p>
                                </div>
                                <p id="quick-converter-result"
                                    class="font-extrabold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent text-center break-words"
                                    style="font-size: clamp(1.25rem, 6vw, 2rem); line-height: 1.2;">
                                    --</p>
                                <p id="converter-fee-notice"
                                    class="text-xs text-emerald-600 text-center min-h-[1rem] font-medium mt-1"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- Sec√ß√£o 2: Vantagens (com √çcones) -->
        <section class="bg-white py-10 md:py-20">
            <div class="max-w-6xl mx-auto px-3 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-4">Vantagens Principais</h2>
                    <p class="text-lg text-slate-600 max-w-2xl mx-auto">Controlo total e seguran√ßa m√°xima nas suas
                        transa√ß√µes online.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
                    <!-- Vantagem 1 -->
                    <div class="card-hover bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9">
                                </path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Acesso Global</h3>
                        <p class="text-slate-600">Pague servi√ßos como Netflix, Spotify, Amazon, e anuncie no Facebook ou
                            Google Ads.</p>
                    </div>
                    <!-- Vantagem 2 -->
                    <div class="card-hover bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Seguran√ßa Refor√ßada</h3>
                        <p class="text-slate-600">Use um cart√£o pr√©-pago, carregando apenas o valor que precisa para as
                            suas compras.</p>
                    </div>
                    <!-- Vantagem 3 -->
                    <div class="card-hover bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Controlo de Gastos</h3>
                        <p class="text-slate-600">Carregue a partir de 5,00 US$ ou EUR e controle exatamente quanto
                            gasta.</p>
                    </div>
                    <!-- Vantagem 4 -->
                    <div class="card-hover bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Ativa√ß√£o R√°pida</h3>
                        <p class="text-slate-600">Solicite via WhatsApp e receba os dados do seu cart√£o pronto a usar em
                            minutos.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sec√ß√£o 3: Como Funciona (Passos) -->
        <section class="py-10 md:py-20">
            <div class="max-w-5xl mx-auto px-3 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-4">Como Funciona?</h2>
                    <p class="text-lg text-slate-600 max-w-2xl mx-auto">Adquirir o seu cart√£o √© um processo simples e
                        r√°pido, feito em 3 passos.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Passo 1 -->
                    <div class="bg-white p-8 rounded-xl shadow-lg text-center border-t-4 border-emerald-500">
                        <span class="text-5xl font-bold text-emerald-600/30 block mb-2">1</span>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Solicita√ß√£o</h3>
                        <p class="text-slate-600">Clique no bot√£o "Pedir Cart√£o" e fale connosco via WhatsApp para
                            confirmar os seus dados.</p>
                    </div>
                    <!-- Passo 2 -->
                    <div class="bg-white p-8 rounded-xl shadow-lg text-center border-t-4 border-emerald-500">
                        <span class="text-5xl font-bold text-emerald-600/30 block mb-2">2</span>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Pagamento</h3>
                        <p class="text-slate-600">Efetue o pagamento da taxa de servi√ßo. O valor a pagar √© calculado com
                            base no c√¢mbio informal, que pode simular no conversor acima.</p>
                    </div>
                    <!-- Passo 3 -->
                    <div class="bg-white p-8 rounded-xl shadow-lg text-center border-t-4 border-emerald-500">
                        <span class="text-5xl font-bold text-emerald-600/30 block mb-2">3</span>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">Receba e Carregue</h3>
                        <p class="text-slate-600">Receba os dados do seu cart√£o e fa√ßa o primeiro carregamento (m√≠n.
                            5,00 US$) para come√ßar a usar.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sec√ß√£o 4: Onde Usar & FAQ -->
        <section class="bg-white py-10 md:py-20">
            <div class="max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16">
                <!-- Coluna Onde Usar -->
                <div>
                    <h2 class="text-3xl font-bold text-slate-800 mb-6">Onde Posso Usar o Meu Cart√£o?</h2>
                    <p class="text-slate-600 mb-6">O seu cart√£o √© aceite em milh√µes de websites e servi√ßos que aceitam
                        Visa:</p>
                    <ul class="space-y-4">
                        <li class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-emerald-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span class="text-slate-700"><strong>Compras Online:</strong> Amazon, AliExpress, Shein,
                                eBay, etc.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-emerald-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span class="text-slate-700"><strong>Subscri√ß√µes e Streaming:</strong> Netflix, Spotify,
                                Disney+, Apple Music.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-emerald-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span class="text-slate-700"><strong>Servi√ßos Digitais:</strong> Google Play Store, Apple
                                App Store.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-emerald-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span class="text-slate-700"><strong>Publicidade Online:</strong> Facebook Ads, Google Ads,
                                TikTok Ads.</span>
                        </li>
                    </ul>
                </div>

                <!-- Coluna FAQ -->
                <div>
                    <h2 class="text-3xl font-bold text-slate-800 mb-6">Perguntas Frequentes</h2>
                    <div class="space-y-6">
                        <!-- FAQ 1 -->
                        <details class="border-b border-slate-200 pb-4 group" open>
                            <summary
                                class="flex justify-between items-center font-semibold text-slate-800 text-lg cursor-pointer list-none">
                                1. O cart√£o √© f√≠sico ou virtual?
                                <svg class="w-5 h-5 text-slate-500 transform transition-transform duration-300 group-open:rotate-180"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </summary>
                            <p class="mt-3 text-slate-600">Este √© um cart√£o 100% virtual. Receber√° todos os dados
                                (n√∫mero, data de validade e c√≥digo CVV) digitalmente para usar em pagamentos online.</p>
                        </details>
                        <!-- FAQ 2 -->
                        <details class="border-b border-slate-200 pb-4 group">
                            <summary
                                class="flex justify-between items-center font-semibold text-slate-800 text-lg cursor-pointer list-none">
                                2. Como fa√ßo para carregar o cart√£o?
                                <svg class="w-5 h-5 text-slate-500 transform transition-transform duration-300 group-open:rotate-180"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </summary>
                            <p class="mt-3 text-slate-600">O carregamento √© feito por transfer√™ncia banc√°ria em Kwanzas
                                (Kz). Ap√≥s a solicita√ß√£o do cart√£o, receber√° todas as instru√ß√µes detalhadas e os dados
                                para o carregamento.</p>
                        </details>
                        <!-- FAQ 3 -->
                        <details class="border-b border-slate-200 pb-4 group">
                            <summary
                                class="flex justify-between items-center font-semibold text-slate-800 text-lg cursor-pointer list-none">
                                3. Preciso de ter uma conta banc√°ria?
                                <svg class="w-5 h-5 text-slate-500 transform transition-transform duration-300 group-open:rotate-180"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </summary>
                            <p class="mt-3 text-slate-600">N√£o, n√£o √© obrigat√≥rio ter uma conta banc√°ria para adquirir o
                                cart√£o. O pagamento da taxa e os carregamentos podem ser feitos por dep√≥sito ou
                                transfer√™ncia a partir de qualquer conta.</p>
                        </details>
                        <!-- FAQ 4 -->
                        <details class="border-b border-slate-200 pb-4 group">
                            <summary
                                class="flex justify-between items-center font-semibold text-slate-800 text-lg cursor-pointer list-none">
                                4. Em quanto tempo recebo o cart√£o?
                                <svg class="w-5 h-5 text-slate-500 transform transition-transform duration-300 group-open:rotate-180"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </summary>
                            <p class="mt-3 text-slate-600">Ap√≥s a confirma√ß√£o do pagamento da taxa de aquisi√ß√£o, os
                                dados do cart√£o s√£o enviados em poucos minutos diretamente para o seu WhatsApp.</p>
                        </details>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sec√ß√£o 5: Final CTA -->
        <section class="bg-emerald-700 py-10 md:py-20">
            <div class="max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl md:text-4xl font-extrabold text-white mb-6">Pronto para Comprar no Mundo Inteiro?
                </h2>
                <p class="text-lg text-emerald-100 max-w-xl mx-auto mb-10">N√£o espere mais. Garanta a sua independ√™ncia
                    digital hoje mesmo e aceda a servi√ßos e produtos globais.</p>

                <a id="whatsapp-cta-btn-footer"
                    href="https://wa.me/244XXXXXXXXX?text=Ol%C3%A1%2C%20gostaria%20de%20adquirir%20o%20Cart%C3%A3o%20Visa%20Virtual."
                    target="_blank" rel="noopener"
                    class="inline-flex items-center gap-3 bg-white text-emerald-700 font-bold py-4 px-8 rounded-lg text-lg transition-colors duration-300 transform hover:scale-105 hover:bg-slate-100">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z">
                        </path>
                    </svg>
                    <span id="whatsapp-cta-text-footer">Pedir Cart√£o via WhatsApp</span>
                </a>
            </div>
        </section>


    </main>



    <footer data-include="/components/_footer.html" class="bg-slate-800 text-slate-400 mt-16 py-8"></footer>

    <!-- Chat Widget - DESATIVADO TEMPORARIAMENTE -->
    <!--
    <div id="ana-chat-widget" class="fixed bottom-6 right-6 z-50 flex flex-col items-end">
        <div id="ana-chat-window"
            class="hidden bg-white w-80 md:w-96 rounded-2xl shadow-2xl border border-slate-200 overflow-hidden mb-4 transition-all duration-300 transform origin-bottom-right scale-95 opacity-0">
            <div class="bg-gradient-to-r from-emerald-600 to-teal-600 p-4 flex justify-between items-center text-white">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
                        <span class="text-xl">üë©‚Äçüíª</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Ana - EcoKambio</h3>
                        <p class="text-xs text-emerald-100 flex items-center gap-1">
                            <span class="w-2 h-2 bg-emerald-300 rounded-full animate-pulse"></span>
                            Online
                        </p>
                    </div>
                </div>
                <button id="close-chat-btn" class="text-white/80 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <div id="chat-messages" class="h-80 overflow-y-auto p-4 bg-slate-50 space-y-4">
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-sm">üë©‚Äçüíª</span>
                    </div>
                    <div
                        class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 text-sm text-slate-700">
                        <p>Ol√°! Sou a Ana, a assistente virtual da EcoKambio. Como posso ajudar voc√™ hoje com o seu
                            Cart√£o Visa Virtual?</p>
                    </div>
                </div>
            </div>

            <div class="p-4 bg-white border-t border-slate-100">
                <form id="chat-form" class="flex gap-2">
                    <input type="text" id="chat-input"
                        class="flex-1 border border-slate-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500"
                        placeholder="Digite sua pergunta..." required>
                    <button type="submit"
                        class="bg-emerald-600 hover:bg-emerald-700 text-white p-2 rounded-full transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                    </button>
                </form>
            </div>
        </div>

        <button id="open-chat-btn"
            class="bg-emerald-600 hover:bg-emerald-700 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 flex items-center gap-2 group">
            <span class="text-2xl">üí¨</span>
            <span
                class="max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 ease-in-out whitespace-nowrap text-sm font-bold">Falar
                com a Ana</span>
        </button>
    </div>
    -->


    <!-- Scripts - Deferred for performance -->
    <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script defer src="/js/components.js"></script>
    <script type="module">
        async function loadVisaPageData() {
            let informalRates = { usd_rate: 0, eur_rate: 0 };
            let visaSettings = {};

            try {
                const response = await fetch('/api/visa-settings');
                if (!response.ok) throw new Error('Failed to load settings');
                const settings = await response.json();

                // Helper to format currency
                const formatCurrency = (value, currency) => new Intl.NumberFormat('pt-AO', { style: 'currency', currency, minimumFractionDigits: 2, maximumFractionDigits: 20 }).format(value);

                // Update dynamic elements
                document.getElementById('visa-title').textContent = settings.visa_title || 'Cart√£o Visa Virtual';
                document.getElementById('visa-image').src = settings.visa_image_url || '/assets/visa.png';
                visaSettings = settings;

                // Carregar taxas informais para o conversor
                try {
                    const ratesResponse = await fetch('/api/informal-rates');
                    if (ratesResponse.ok) {
                        informalRates = await ratesResponse.json(); // eslint-disable-line
                    }
                } catch (rateError) {
                    console.error('Could not load informal rates:', rateError);
                }

                // Update WhatsApp links
                const whatsappNumber = settings.visa_whatsapp_number;
                if (whatsappNumber) {
                    updateWhatsappLink(whatsappNumber);
                }

                // Inicia o conversor com as taxas carregadas
                setupQuickConverter(informalRates, visaSettings);

            } catch (error) {
                console.error('Error loading Visa page data:', error);
                // The page will show default static values if the fetch fails.
                setupQuickConverter(informalRates, visaSettings); // Inicia o conversor mesmo em caso de erro
            }
        }

        function updateWhatsappLink(whatsappNumber) {
            const heroBtn = document.getElementById('whatsapp-cta-btn-hero');
            const footerBtn = document.getElementById('whatsapp-cta-btn-footer');
            if (!heroBtn || !footerBtn || !whatsappNumber) return;

            // Sempre usa a mensagem padr√£o, sem valores do simulador
            const text = `Ol√°, gostaria de adquirir o Cart√£o Visa Virtual.`;
            const encodedText = encodeURIComponent(text);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedText}`;

            // Atualiza os links
            heroBtn.href = whatsappUrl;
            footerBtn.href = whatsappUrl;
        }

        function setupQuickConverter(rates, settings) {
            const amountInput = document.getElementById('quick-converter-amount');
            const fromSelect = document.getElementById('quick-converter-from');
            const resultDisplay = document.getElementById('quick-converter-result');
            const feeNotice = document.getElementById('converter-fee-notice');
            const feePercent = parseFloat(settings.visa_fee_percent) || 10; // Default 10% se n√£o houver settings


            // Fun√ß√£o para formatar o valor com m√°scara
            const formatCurrencyInput = (value) => {
                // Remove tudo exceto d√≠gitos
                const numbers = value.replace(/\D/g, '');

                if (!numbers) return '';

                // Converte para n√∫mero e formata
                const numberValue = parseFloat(numbers) / 100;

                // Formata com separador de milhares (.) e decimais (,)
                return numberValue.toLocaleString('pt-AO', {
                    minimumFractionDigits: 2, // Mant√©m 2 para a digita√ß√£o no campo
                    maximumFractionDigits: 2 // Mant√©m 2 para a digita√ß√£o no campo
                });
            };


            // Aplica m√°scara ao digitar
            amountInput.addEventListener('input', (e) => {
                const cursorPosition = e.target.selectionStart;
                const oldLength = e.target.value.length;

                // Formata o valor
                let formattedValue = formatCurrencyInput(e.target.value);

                // Verifica se excede o m√°ximo (5.000.000)
                const maxAmount = 5000000;
                const numericValue = parseFloat(formattedValue.replace(/\s/g, '').replace(/\./g, '').replace(',', '.'));

                if (!isNaN(numericValue) && numericValue > maxAmount) {
                    // Trunca para o valor m√°ximo
                    formattedValue = maxAmount.toLocaleString('pt-AO', {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2
                    });
                }

                e.target.value = formattedValue;

                // Ajusta posi√ß√£o do cursor
                const newLength = e.target.value.length;
                const diff = newLength - oldLength;
                e.target.setSelectionRange(cursorPosition + diff, cursorPosition + diff);

                calculate();
            });


            const calculate = () => {
                // Remove espa√ßos, pontos (separadores de milhares) e converte v√≠rgula em ponto
                const amountStr = amountInput.value
                    .replace(/\s/g, '')  // Remove espa√ßos
                    .replace(/\./g, '')  // Remove pontos (separador de milhares)
                    .replace(',', '.');  // Converte v√≠rgula decimal em ponto
                const amount = parseFloat(amountStr);
                const headerElement = document.getElementById('converter-header');

                // Reset styles
                feeNotice.classList.remove('text-red-600');
                feeNotice.classList.add('text-emerald-500');

                if (isNaN(amount) || amount === 0) {
                    feeNotice.textContent = '';
                    resultDisplay.textContent = '--';
                    headerElement.style.display = 'none'; // Oculta "Voc√™ vai pagar"
                    return;
                }

                const from = fromSelect.value;
                const minAmount = 5; // Valor m√≠nimo em USD ou EUR
                const maxAmount = 5000000; // Valor m√°ximo: 5 milh√µes

                // Valida√ß√£o de valor m√≠nimo
                if (amount < minAmount) {
                    feeNotice.textContent = `‚ö†Ô∏è Valor m√≠nimo para carregamento: ${minAmount},00 ${from}`;
                    feeNotice.classList.remove('text-emerald-500');
                    feeNotice.classList.add('text-red-600');
                    resultDisplay.textContent = 'Abaixo do m√≠nimo';
                    headerElement.style.display = 'none'; // Oculta "Voc√™ vai pagar"
                    return;
                }

                // Valida√ß√£o de valor m√°ximo
                if (amount > maxAmount) {
                    feeNotice.textContent = `‚ö†Ô∏è Valor m√°ximo permitido: ${maxAmount.toLocaleString('pt-AO')} ${from}`;
                    feeNotice.classList.remove('text-emerald-500');
                    feeNotice.classList.add('text-red-600');
                    resultDisplay.textContent = 'Acima do m√°ximo';
                    headerElement.style.display = 'none'; // Oculta "Voc√™ vai pagar"
                    return;
                }


                let resultAmount = 0;
                let rate = 0;

                // A l√≥gica agora √© sempre converter de USD/EUR para AOA, aplicando a taxa.
                // Se n√£o houver rates da API, usar valores padr√£o
                const defaultRates = { usd_rate: 1200, eur_rate: 1300 };
                rate = (from === 'USD')
                    ? (rates.usd_rate || defaultRates.usd_rate)
                    : (rates.eur_rate || defaultRates.eur_rate);
                const convertedAmount = amount * rate;
                resultAmount = convertedAmount * (1 + (feePercent / 100));


                // Mostra a nota da taxa
                const formattedFee = new Intl.NumberFormat('pt-AO', { style: 'decimal', minimumFractionDigits: 0, maximumFractionDigits: 20 }).format(feePercent);
                if (feePercent > 0) {
                    feeNotice.textContent = `Inclui a nossa taxa de servi√ßo de ${formattedFee}%.`;
                } else {
                    feeNotice.textContent = '';
                }


                const formatNumber = (num) => new Intl.NumberFormat('pt-AO', { // eslint-disable-line
                    style: 'currency',
                    currency: 'AOA',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(num);

                const formattedResult = formatNumber(resultAmount);
                resultDisplay.textContent = (resultAmount && isFinite(resultAmount))
                    ? `‚âà ${formattedResult}`
                    : 'Taxa indispon√≠vel';

                // Ajusta o tamanho da fonte dinamicamente baseado no comprimento do texto
                if (resultAmount && isFinite(resultAmount)) {
                    const textLength = formattedResult.length;
                    let fontSize;

                    if (textLength <= 12) {
                        fontSize = '3.75rem'; // 60px - valores pequenos
                    } else if (textLength <= 15) {
                        fontSize = '3rem'; // 48px - valores m√©dios
                    } else if (textLength <= 18) {
                        fontSize = '2.5rem'; // 40px - valores grandes
                    } else if (textLength <= 22) {
                        fontSize = '2rem'; // 32px - valores muito grandes
                    } else {
                        fontSize = '1.5rem'; // 24px - valores enormes
                    }

                    resultDisplay.style.fontSize = fontSize;
                } else {
                    resultDisplay.style.fontSize = '2rem'; // Tamanho padr√£o para mensagens de erro
                }

                // Mostra "Voc√™ vai pagar" apenas quando h√° resultado v√°lido
                headerElement.style.display = (resultAmount && isFinite(resultAmount)) ? 'flex' : 'none';
            };

            fromSelect.addEventListener('change', calculate);

            // N√£o precisa de chamada inicial pois o campo est√° vazio
        }

        document.addEventListener('DOMContentLoaded', () => {
            const heroButton = document.getElementById('whatsapp-cta-btn-hero');
            const footerButton = document.getElementById('whatsapp-cta-btn-footer');

            heroButton?.addEventListener('click', () => {
                window.logActivity('visa_cta_click', { cta_position: 'hero' });
            });

            footerButton?.addEventListener('click', () => {
                window.logActivity('visa_cta_click', { cta_position: 'footer' });
            });

            // Load dynamic data for the page
            loadVisaPageData();

            // Carrega informa√ß√µes do rodap√© (links sociais, etc.)
            // A fun√ß√£o loadFooterInfo() √© definida em main.js
            // Carrega informa√ß√µes do rodap√© (links sociais, etc.)
            // A fun√ß√£o loadFooterInfo() √© definida em main.js
            if (typeof loadFooterInfo === 'function') loadFooterInfo();

            // ==========================================
            // CHAT WIDGET LOGIC
            // ==========================================
            const chatWidget = document.getElementById('ana-chat-widget');
            const chatWindow = document.getElementById('ana-chat-window');
            const openChatBtn = document.getElementById('open-chat-btn');
            const closeChatBtn = document.getElementById('close-chat-btn');
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');

            // Toggle Chat Window
            function toggleChat() {
                const isHidden = chatWindow.classList.contains('hidden');
                if (isHidden) {
                    chatWindow.classList.remove('hidden');
                    // Small delay to allow display:block to apply before opacity transition
                    setTimeout(() => {
                        chatWindow.classList.remove('opacity-0', 'scale-95');
                        chatWindow.classList.add('opacity-100', 'scale-100');
                        chatInput.focus();
                    }, 10);
                    openChatBtn.classList.add('hidden');
                } else {
                    chatWindow.classList.remove('opacity-100', 'scale-100');
                    chatWindow.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                        chatWindow.classList.add('hidden');
                        openChatBtn.classList.remove('hidden');
                    }, 300);
                }
            }

            // Only add event listeners if chat elements exist
            if (openChatBtn) openChatBtn.addEventListener('click', toggleChat);
            if (closeChatBtn) closeChatBtn.addEventListener('click', toggleChat);

            // Add Message to UI
            function addMessage(text, sender) {
                const div = document.createElement('div');
                div.className = `flex gap-3 ${sender === 'user' ? 'flex-row-reverse' : ''}`;

                const avatar = sender === 'bot'
                    ? `<div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-sm">üë©‚Äçüíª</span></div>`
                    : `<div class="w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-sm">üë§</span></div>`;

                const bubbleClass = sender === 'bot'
                    ? 'bg-white border-slate-100 text-slate-700'
                    : 'bg-emerald-600 text-white border-emerald-600';

                // Convert URLs and internal paths to clickable links
                const urlRegex = /(https?:\/\/[^\s]+|wa\.me\/[^\s]+|\/[a-z-]+(?:\.html)?)/g;
                const formattedText = text.replace(urlRegex, (url) => {
                    // If it's an internal path, don't add https://
                    const fullUrl = url.startsWith('/') ? url : (url.startsWith('http') ? url : `https://${url}`);
                    const displayText = url.startsWith('/') ? url.replace(/\.html$/, '') : url;
                    return `<a href="${fullUrl}" target="_blank" rel="noopener noreferrer" class="underline hover:text-emerald-500 font-semibold">${displayText}</a>`;
                });

                div.innerHTML = `
                    ${avatar}
                    <div class="${bubbleClass} p-3 rounded-2xl ${sender === 'user' ? 'rounded-tr-none' : 'rounded-tl-none'} shadow-sm border text-sm max-w-[80%]">
                        <p>${formattedText}</p>
                    </div>
                `;

                chatMessages.appendChild(div);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Handle Form Submit
            chatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const message = chatInput.value.trim();
                if (!message) return;

                // Add User Message
                addMessage(message, 'user');
                chatInput.value = '';
                chatInput.disabled = true;

                // Add Loading Indicator
                const loadingId = 'loading-' + Date.now();
                const loadingDiv = document.createElement('div');
                loadingDiv.id = loadingId;
                loadingDiv.className = 'flex gap-3';
                loadingDiv.innerHTML = `
                    <div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-sm">üë©‚Äçüíª</span></div>
                    <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 text-sm text-slate-500">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                            <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                            <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(loadingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    const response = await fetch('/api/v1/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message })
                    });

                    const data = await response.json();

                    // Remove loading
                    document.getElementById(loadingId).remove();

                    if (data.response) {
                        addMessage(data.response, 'bot');
                    } else {
                        addMessage("Desculpe, tive um problema ao processar sua mensagem. Pode tentar novamente?", 'bot');
                    }

                } catch (error) {
                    console.error('Chat Error:', error);
                    document.getElementById(loadingId).remove();
                    addMessage("Erro de conex√£o. Verifique sua internet.", 'bot');
                } finally {
                    chatInput.disabled = false;
                    chatInput.focus();
                }
            });
        });
    </script>
</body>

</html>